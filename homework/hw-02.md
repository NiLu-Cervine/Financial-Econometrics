# HW-02：Stata 基础命令练习

> [作业要求](readme.md) | &#x1F353; [**点此提交**](https://workspace.jianguoyun.com/inbox/collect/8b71e5254a0f4f36ac95b582ffd7f2db/submit)

---

请使用 `sysuse nlsw88.dta, clear` 命令调入 Stata 数据文件 `nls88.dta`, 并完成如下统计分析：

> Note: 文中提到的 `. lianxh keywords` 是指在 Stata 命令窗口中输入 `lianxh 直方图` 命令，以便查看相关推文。

- 1．统计如下变量的平均值、标准差、中位数、最小值和最大值，并列表呈现出来，并输出为 Excel 或 Word 文档，名称为 **Table01.xlsx** 或 **Table01.docx**：
`age grade wage hours ttl_exp tenure` 
  - Tips: 可以输入 `lianxh 结果输出 表1` 或自行定义关键词查询相关推文。
- 2．产生如下变量：
  - `age2` : 该变量的所有观察值等于 age 变量中相应观察值的平方
  - `ln_wage = ln(wage) ` : 工资变量的自然对数
  - `wage_hour = wage/hours` : 工资变量 wage 与小时 hours 的比值
  - `dum` : 该变量是一个虚拟变量（dummy variable），其取值为：
    - `dum = 1`  如果某个妇女的 wage 大于所有妇女的平均工资
    - `dum = 0`  如果某个妇女的 wage 小于或等于所有妇女的平均工资
- 3．绘图。
  - 绘制 `ttl_exp` 变量的直方图和密度函数图，分别保存/输出 (提示：可使用 `graph export` 命令) 为 **His_ttl.png** 和 **Kendi_ttl.png**，并作简单解释。
  - 使用 `mkdensity` 命令绘制 **industry** 变量取值为 1,3,5,6,7,11 时，$\ln(wage)$ 变量的密度函数图，并做简要介绍。提示：你可以使用 `des2` 命令或 `label list indlbl`。
- 4．`industry` 变量表示妇女所在的行业，请做如下统计：
  - (1) 每个行业的观察值个数；
  - (2) 各个行业妇女的平均工资(`wage`)、平均工作时数(`hours`)、平均年龄(`age`)；
  - (3) 列表统计不同行业中白种人、黑种人和其他人种的比例
  - **Tips**：可以使用 `tabulue`, `panels`, `egen`, `fre`, `fsum` 等命令。
- 5．请使用 `label define` 和 `label value` 命令，把 `race` 变量中的数值做如下定义：
  - 1 —— “白种人”     
  - 2 —— “黑种人” 
  - 3 —— “其它”
- 6．续别变量转类别变量。
  - (1) 产生一个新变量 `G_age`，取值规则为：若 age<=37，则 G_age=1；若 37<age<=42，则 G_age=2；若 age>42，则 G_age=3;
  - (2) 为 `G_age` 变量添加 **“数字-文字”对应表** ，对应关系为：1 “37岁以下”；2 “38到42岁之间”；3 “43岁以上”。      
  - **Tips**： 可以使用 `label define` 和 `label value` 两个命令
- 7\. 工资分布
  - (1) 在一张图中绘制白人 (`race==1`) 和黑人 (`race==2`) 妇女的工资 (`wage`) 的核密度函数图，并做简要分析。(Tips: 参见推文 `. lianxh 密度`)
  - (2) 用柱状图呈现白人 (`race==1`) 和黑人 (`race==2`) 妇女的工资 (`wage`) 在不同行业 (`industry`) 的分布特征。(Tips: 参见推文 `. lianxh 直方图 柱状图 条形`)
- 8\. 基本回归分析。
  - 使用 `regress` 命令估计各个行业的 (**industry**) 的平均工资，以及工资的行业差异 (基准组可以自行设定)。
  - 然后，使用 `margins` 和 `marginsplot` 命令呈现上一步的估计结果，并在绘图时添加每个估计值的置信区间。 
  - 我设定了如下模型：
    $(1) \quad ln(wage) = a_i + a_j + \beta_1 ln(hours) + \beta_2 Black + \beta_3 Black \times ln(hours) + \gamma Controls + u$
    其中，
    - $a_i$ 表示行业固定效应，可以基于 **industry** 变量来界定；
    - $a_j$ 表示职业固定效应，可以基于 **occupation** 变量来界定；
    - $ln(wage)$ 和 $ln(hours)$ 分别是 **wage** 和 **hours** 变量的自然对数；
    - **Controls** 十一组控制变量，包括 **age**, **age^2**，**i.race**，**ttl_exp**。
    请分别使用 `regress`, `areg`, `reghdfe` 估计上述模型，并简要解释 $\hat{\beta}_1$ 和 $\hat{beta}_3$ 的经济含义。 


